%Pakete;
%A4, Report, 12pt
\documentclass[ngerman,a4paper,12pt]{scrreprt}
\usepackage[a4paper, right=20mm, left=20mm,top=30mm, bottom=30mm, marginparsep=5mm, marginparwidth=5mm, headheight=7mm, headsep=15mm,footskip=15mm]{geometry}

%Papierausrichtungen
\usepackage{pdflscape}
\usepackage{lscape}

%Deutsche Umlaute, Schriftart, Deutsche Bezeichnungen
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage[ngerman]{babel}

%quellcode
\usepackage{listings}

%tabellen
\usepackage{tabularx}

%listen und aufzählungen
\usepackage{paralist}

%farben
\usepackage[svgnames,table,hyperref]{xcolor}

%symbole
\usepackage{latexsym,textcomp}
\usepackage{amssymb}

%font
\usepackage{helvet}
\renewcommand{\familydefault}{\sfdefault}

%durch- und unterstreichen
\usepackage{ulem}

%Abkürzungsverzeichnisse
\usepackage[printonlyused]{acronym}

%Bilder
\usepackage{graphicx} %Bilder
\usepackage{float}	  %"Floating" Objects, Bilder, Tabellen...
\usepackage[space]{grffile} %Leerzechen Problem bei includegraphics
\usepackage{wallpaper} %Seitenhintergrund setzen
\usepackage{transparent} %Transparenz

%Tikz, Mindmaps, Trees
\usepackage{tikz}
\usetikzlibrary{mindmap,trees}
\usepackage{verbatim}

%for
\usepackage{forloop}
\usepackage{ifthen}

%Dokumenteigenschaften
\title{Summary InfSi2}
\author{Tobias Blaser}
\date{\today{}, Uster}


%Kopf- /Fusszeile
\usepackage{fancyhdr}
\usepackage{lastpage}

\pagestyle{fancy}
	\fancyhf{} %alle Kopf- und Fußzeilenfelder bereinigen
	\renewcommand{\headrulewidth}{0pt} %obere Trennlinie
	\fancyfoot[L]{\jobname} %Fusszeile links
	\fancyfoot[C]{Seite \thepage/\pageref{LastPage}} %Fusszeile mitte
	\fancyfoot[R]{\today{}} %Fusszeile rechts
	\renewcommand{\footrulewidth}{0.4pt} %untere Trennlinie

%Kopf-/ Fusszeile auf chapter page
\fancypagestyle{plain} {
	\fancyhf{} %alle Kopf- und Fußzeilenfelder bereinigen
	\renewcommand{\headrulewidth}{0pt} %obere Trennlinie
	\fancyfoot[L]{\jobname} %Fusszeile links
	\fancyfoot[C]{Seite \thepage/\pageref{LastPage}} %Fusszeile mitte
	\fancyfoot[R]{\today{}} %Fusszeile rechts
	\renewcommand{\footrulewidth}{0.4pt} %untere Trennlinie
}

\usepackage{changepage}

% Abkürzungen für Kapitel, Titel und Listen
\input{commands/shortcutsListAndChapter}
\input{commands/TextStructuringBoxes}

%links, verlinktes Inhaltsverzeichnis, PDF Inhaltsverzeichnis
\usepackage[bookmarks=true,
bookmarksopen=true,
bookmarksnumbered=true,
breaklinks=true,
colorlinks=true,
linkcolor=black,
anchorcolor=black,
citecolor=black,
filecolor=black,
menucolor=black,
pagecolor=black,
urlcolor=black
]{hyperref} % Paket muss unbedingt als letzes eingebunden werden!

\usepackage{graphicx}
\begin{document}

% Inhaltsverzeichnis
\tableofcontents
\clearpage

\ch{Repetition}

\se{Kryptographische stärke im 2013}
\exam{Schlüsselstärken wissen an Prüfung}

\ul
	\li Symetrische Verschlüsselung: 
		\ul
			\li AES \textbf{128bit}, 192bit, \textbf{256bit} \\
			\ra Es gibt keine Shortcut Attacken bei 128, nur Brute Force. 256 und 192 haben jeweils eine etwas kleinere Stärke (ca 220, 180) weil man durch das verwendete Gleichungssystem etwas effizienter als mit Brute Force angreifen kann.
			\li Twofish 
			\li 3DES 168bit (3x56bit) \ra Stärke 112bit (doppelte DES Veschlüsselung) \\
				\ra Es gibt eine Attacke von beiden Enden her, darum braucht 3DES in der Mitte noch die 3. DES Verschlüsselung und kommt auf eine Stärke von doppeltem DES
			\li Camellio
		\ulE
	\li Data Integrity (Hash): 
		\ul
			\li SHA-3 (Keccak) 224, 256, 384, 512bit \\
				\ra auf 64Bit Rechnern ist 512bit schneller als 256bit
			\li \textbf{SHA-2 (NIST)}
		\ulE
	\li Key Exchange (between peers):
		\ul
			\li DH \textbf{2048bit}, 1576bit \\
			\ra Aufwand wächst gegenüber symetrischen Verfahren mit der 3.Potenz des Modulus der Primzahl, daher Key viel länger
		\ulE
	\li Digital Signature: 
		\ul
			\li RSA \textbf{2048bit}, 4096bit \\
			\ra Root Server, die ein Zertifikat für 20 Jahre lösen, verwenden schon heute 4096
			\li DSA (Digital Signature Algorithm, erlaubt nur zu verschlüsseln nicht zu signieren) \\
			\ra mit eliptischen Kruven: ECDSA
		\ulE
	\li Public Key:
		\ul
			\li RSA 2048bit, 4096bit für langjährige Ausrichtung
			\li El Gamal (verwandt mit DH) 2048bit
		\ulE
	\li User Password: 22 Zeichen \ra 128bit, 12 absolutes Minimum
\ulE

\se{NSA Suites}
\img{img/v1.1.jpg}{NSA Suite B 128bit security (CONFIDENTIAL)}{0.75}{}
\img{img/v1.2.jpg}{NSA Suite B 192bit security (SECRET)}{0.75}{}

Alle Verfahren sollen gleich stark sein, damit es kein schwächstes Verfahren in der Kette gibt.

\ch{Elliptische Kurven}
\img{img/v1.3.jpg}{}{0.75}{}
\ul
	\li Polynom 3. Grades
	\li EC sind immer spiegelsymetrisch zur X-Achse, weil Quadratwurzeln immer zwei Lösungen besitzen
	\li Gute elliptische Kurve: Keine Nullstellen fallen zusammen, x\^3 besitzt 3 unterschiedliche Nullstellen.
	\li Operationen müssen Assoziativ sein
	\li Oft auch Kommutativ
\ulE

\expl{Algebraische Gruppe}{Zahlensystem, in dem bestimmte Regeln gelten. 
	\ul
		\li Wendet man auf Gruppenmitglieder Operationen an, so liegt das Resultat wieder innerhalb der Gruppe
		\li Jede Gruppe besitzt ein neutrales Element e
		\li Jede Gruppe besitzt ein inverses Element a
	\ulE}
\img{img/v1.4.jpg}{}{0.75}{}
\img{img/v1.5.jpg}{Punkte auf einer elliptischen Kurve, die eine Gruppe bilden}{0.75}{}
\ul
	\li Alle Elemente, die auf einer elliptischen Kruve liegen, bilden eine algebraische Gruppe.
	\li Gearbeitet wird mit Punktaddition:
		\ul
			\li Punkte werden mti Linie verbunden \ra neuer Punkt auf Line \ra spiegelung davon is Resultat
		\ulE
	\li Der Punkt im Unendlichen ist das neutrale Element
	\li P + das neutrale Element ergibt wieder P
	\li Um wie mit DH damit arbeiten zu können, muss ich einen Punkt mehrmals zu sich selbst addieren
\ulE
\img{img/v1.6.jpg}{Neutrales und inverses Element}{0.75}{}
\img{img/v1.7.jpg}{Punkt duplikation - einen Punkt zu sich selbst addieren}{0.75}{}
\img{img/v1.8.jpg}{Punkt Iteration, Addieren eines Punktes k-1 mal zu sich selbst}{0.75}{}
\img{img/v1.9.jpg}{}{0.75}{}

\se{Praktische Anwendung}
\img{img/v1.10.jpg}{}{0.75}{}
\ul
	\li Kurve wird bekannt gegeben: Primzahl b, Parameter a,b
	\li Startpunkt P auf Kurve wird auch bekannt gegeben
	\li Bob und Alis wählen eine Zahl a, die bestimmt, wie viel mal P mit sich selbst addiert wird \ra Bildpunkt 
	\li Bildpunkt wird öffentlich übertragen
	\li aus den übertragenene Elementen kann nur mit sehr grossem Aufwand a berechnet werden
	\li das Wachstum der geheimnisse a und b korreliert fast linear mit der Verschlüsselungsstärke
\ulE

\se{AEAD}
\ul
	\li Verschlüsselung + Hash in einem Schritt
	\li Gegenüber einzelner Verschlüsselung und einzelner Signaturerstellung viel schneller
	\li Kaum langsamer gegenüber nur Verschlüsselung
\ulE


\ch{Physical Layer Security}
Früher Verwendet:
\ul
	\li Voice Scrambling (Time Multiplex)
	\li Frequency Hopping
\ulE

\se{Quantenkryptographie}
Splitten von Photonen in zwei Photenen, die verschränkt sind.
\img{img/v2.1.jpg}{}{0.75}{}
\expl{Polarisiertes Licht}{Nach dem horizontalen oder vertikalen elektrischen Feld ausgerichtetes Licht}
\ul
	\li Nicht gemessene Photonen haben beide polarisierten Zustände
	\li Zwei Set von Filter: 0°, 90° (Sieht aus wie ein Schweizerkreuz) und 45°, 115°.
	\li Messen Empfänger und Sender gleich (polarisiert), so haben die beiden Photonen den gleichen Zustand.
	\li 2. Zufallsmessung
	\li Horcht jemand mit, so verändert er damit den Quantenzustand und die beiden Kommunikationsteilnehmer bemerken dies. \ra Bob erhält kein Photon
	\li Klaut Eve das Photon und speist ein anderes ein, so funktioniert dies nicht, weil verschränkte Photonen nicht dupliziert werden können.
	\li Diese Quanten laufen über eine sepparate Glasphaser
	\li Kommunikationsparter teil sich nicht mit, was sie gemessen haben, sondern mit welchen Filterset. Haben SIe mit unterschiedlichen Filtersets gemessen, so werden diese Photonen verworfen. \ra 50\% Ausschuss
	\li Wegen diesen 50\% Verwurf kann der Quantenkanal nicht für Streamcipher verwendet werden. Zudem ist der Schlüsselstrom ziemlich niederratig. \ra Quantenkanal wird nur für Session-Schlüsselaustausch verwendet.
	\li Problem mit Distanz: Repeathen nicht möglich.
\ulE

\se{BB84 Key Distribution System}
\ul
	\li Alice erzeugt normalePhotonen und sendet diese an Bob
	\li Photon wird moduliert
	\li Bob wählt zufällig Filterset
	\li Wenn Eve ein Photon klaut, kriegt Bob keines
	\li Nach gewisser Anzahl Photonen tauschen Bob und Alice das verwendete Filterset aus und Alice gibt die Modulation bekannt (orthogonal / 45° verschoben). \ra Nicht passende Filtersets werden verworfen
	\li Speist Eve zusätzliche Photonen ein, so kann dies detektiert werden
	\li Es ist praktisch unmöglich einen Laser zu bauen, der nur ein Photon ausgibt
	\li Problematisch, wenn der Laser mehr als ein Photon ausgibt, weil Eve dann eines der Photonen klaut. \ra Eve klaut natürlich immer eines, daher erhält Bob nur die Photonen, die mehrfach ausgesendet werden.
	\li Dämpfung in der Glasfaser: bei 10dB Dämpfung kommen nur noch 10\% an, bei 20db nur 1\%.
	\li Maximale Distanz: 1000km \ra 30dB Dämpfung
	\li Daher ist die Netodatenrate sehr tief und es fällt gar nicht auf, wenn Eve Photonen klaut.
\ulE

\img{img/v2.2.jpg}{}{0.75}{}

\sse{Erhältliche Systeme}
\img{img/v2.3.jpg}{Layer 2 Encription with Quantum Key Distribution}{0.75}{}
\ul
	\li Untersten Kanal ist Key Distribution Kanal (1Key/min)
	\li Basierend auf RR84 und SARG, bis 50km Distanz zwischen Ersatz Rechenzentrum
	\li 10Gbit/s mit AES-256
\ulE
\img{img/v2.4.jpg}{}{0.75}{}


\se{Schlüssel Material und Randoom Nummern}
\img{img/v2.5.jpg}{HMAC}{0.75}{}
\ul
	\li Dokument wird zusammen mit Key gehashed und das ganze erneut mit Outerkey zu MAC verarbeitet.
\ulE
\img{img/v2.6.jpg}{PRF pseudo randoom function}{0.75}{}
\ul
	\li Seed wird gehashed mit Secret zusammen
	\li Autput wird erneut als Input für Hash verwendet
	\li So wird Stück für Stück genügend Zufallsmaterial generiert
	\li Zur Sicherheit wird jeder Output am Schluss erneut gehashed, damit nicht auf den vorherigen Output zurückgeschlossen werden kann
	\li Entropie des keys (Secret) wird ``verdünnt'' auf den ganzen Bitstream \ra nimmt nicht zu
\ulE
\exam{PRF}{Funktion nicht genau kennen, nur wissen dass es ein Verdünnen von Schlüsselmaterial ist}

\sse{TLS1.1 Master secret}
\img{img/v2.7.jpg}{TLS 1.1 Master Secret Berechnung}{0.75}{}
\ul
	\li Premastersecret (echte Entropie) wird aufgeteilt und erste Hälfte durch PRF-MD5 durchgelassen, zweite Hälfte durch PRF-SHA-1 durchgelassen. \\
	 \li Grund dafür: Angst vor Fall von MD5, Angst vor Backdoor in SHA-1
	 \li Beide Teile werden anschliessend verknüpft
\ulE
\img{img/v2.8.jpg}{Generating TLS 1.1 Key Material}{0.75}{}


\se{Generieren von wahren randoom Numbers}
\ul
	\li Zeicheneingabe von Tastatur besitzt wenig Entropie \ra Verwendet wird die Zeit zwischen den Tastenschlägen
	\li Mausbewegung
	\li Rauschen aus der Soundkarte
	\li Zugriffszeiten auf die Harddisk (Schwankungen durch Luftturbulenzen in echanischen HD's)
	\li Am Besten möglichst viele Quellen zusammenhashen
\ulE
\important{Hashen erhöht die Entropie nicht! Verbessert nur die Statistik}
\expl{Entropie Generator Ausfall}{Muss detektiert werden, weil sonst ein Strom mit null Entropie empfangen wird.}

\sse{Hardware basierte wahre Random Generatoren}
\ul
	\li Jeder Halbleiter rauscht \ra Auf Prozessor wird Diode gesetzt, die durch Rauschen Zufallszahlen erzeugt
	\li Thermal Nose Sources
\ulE

\img{img/v2.9.jpg}{Photonengenerator, dessen Strom durch Spiegel umgelenkt werden}{0.75}{}
\img{img/v2.10.jpg}{}{0.75}{}

\sse{Randomness überprüfen und korrigieren}
\ul
	\li Problem: zu viele Nullen \ra Bits werden nach Auftrittswahrscheinlichkeit substituiert.
\ulE

\ch{Data Link Layer Security}
\se{EAP}
\img{img/v3.1.jpg}{Gerät ist entweder Suplicant oder Authentiater (Antragsteller oder Authentifizierer)}{0.75}{}

\definition{EAPOL}{EAP over LAN}
Gewünscht: Verschlüsseln der Trunkleitung zum Radiusserver

\se{IEEE 802.1AR -DevID}
\definition{DevID}{Secure Device ID}
\ul
	\li Jedes Gerät wird ab Werk mit Schlüssel für EC, RSA ausgeliefert
	\li In einem Rom gespeichert, kann nicht gelöscht werden
	\li Bereits ein Zertifikat gespeichert, welches vom Hardwarehersteller signiert wurde
	\li Lokaler Administrator kann beliebig viele Device ID's hinzufügens
	\li Befindet sich in geschütztem Chip
\ulE
\img{img/v3.2.jpg}{}{0.75}{}
\ul
	\li SHA 256 vorgeschrieben
	\li ANwendungen: EAP-TLS Authentisierung (Nicht User ID sondern Device ID)
	\li Mit TPM haben die meissten PC's bereits heute Möglichkeiten für eine DeviceID
\ulE

\se{MAC Layer Security}
\ul
	\li Verschlüsselung muss effizient sein wegen häufigem rekeying
	\li Bestimmte Benutzer werden zu Gruppen zusammengefast (Connectivity Association)
\ulE
\definition{CAK}{Connectivity Authentication Key}
\img{img/v3.3.jpg}{CA}{0.5}{}
\img{img/v3.4.jpg}{Secure Channel für jede Verbindung zwischen den Teilnehmern}{0.5}{}
\ul
	\li Jeder Channel besitzt einen eigenen Schlüssel (Channel sind gerichtet)
	\li Schlüsselwechsel muss fliegend geschehen können: Pakete werden mit altem Schlüssel verschlüsselt und irgendwann wird gewechselt
	\li Jedes Paket enthält Channel und welcher Schlüssel zum Entschlüsseln verwendet werden soll
\ulE
\img{img/v3.5.jpg}{Association Number legt fest, ob alter oder neuer Key verwendet wurde}{0.75}{}

\sse{Sonderfall Peer-Peer, Peer-AP}
\img{img/v3.6.jpg}{}{0.75}{}

\sse{MAC sec}
\img{img/v3.7.jpg}{MAC sec Frame Format}{0.75}{}
\ul
	\li Security Tag: 8Byte oder 16Byte
	\li VErschlüsselung: Paket wird mit AES im Countermode verschlüsselt
	\li ICV ist MAC, krypt. Checksumme (16Byte)
	\li Ethernet Frame wird gesprengt wie bei getaggten VLAN Paketen
	\li FCS: Checksumme auf Bitfehler
\ulE

\img{img/v3.8.jpg}{SecTag Format}{0.75}{}
\ul
	\li Ethertype für MACSec (> 1500)
	\li im TCI ist definiert, ob SCI (Secure Channel Identifiert) mitgeschickt wird \\
	\ra Wenn SCI aus der MAC Adresse berechnet werden kann, kann er weggelassen werden
	\li Hash von SCI wird übertragen, auch wenn SCI nicht übertragen wird
	\li Wenn Paket zu kurz für Kollisionsdetektion, wird Tagging NACH dem ICV eingefügt \\
		\ra Problem bei Ethernet ohne Längenfeld: Wo beginnt das Padding? Chechsumme falsch \ra Secure TAG enthält Länge im SL (Short Length) Field (Feld gibt an, wenn Paket kürzer als 64Byte, wie lange es ist)
	\li schutz gegen Replay Attacken: PN Feld enthält Paket Number
\ulE

\img{img/v3.9.jpg}{TCI - TAG Control Information}{0.75}{}
\ul
	\li Wenn Bit E gesetzt: Verschlüsselung, sonst nur Checksum
\ulE

\img{img/v3.10.jpg}{Verschlüsselung im AES Counter Mode, SAK und CAK bieten 128bit \ra durchgehend gleiche Verschlüsselungsstärke}{1}{}

\sse{MKA distributes random SAK using CAK}
\img{img/v3.11.jpg}{}{0.75}{}
\ul
	\li SAK wird für Hashing und Verschlüsselung gebraucht
	\li Hilfsschlüssel KEK werden zur Verteilung gebraucht
	\li Jeder Teilnehmer der Connectivity Association trägt einen Teil zum SAK bei
	\li CAK lebt für Jahre im Switch
	\li KEK wird abgelegt und auch ewig verwendet
	\li 
\ulE






\end{document}
